From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: SoSeDiK <mrsosedik@gmail.com>
Date: Sat, 19 Feb 2022 08:20:30 +0200
Subject: [PATCH] Add PlayerSaddleEntityEvent


diff --git a/src/main/java/net/minecraft/world/item/SaddleItem.java b/src/main/java/net/minecraft/world/item/SaddleItem.java
index 0c975875f1f2d0236d42a291486a7e78e1702802..1ab26d3a485fc7d737d9d39d479283344d560ef1 100644
--- a/src/main/java/net/minecraft/world/item/SaddleItem.java
+++ b/src/main/java/net/minecraft/world/item/SaddleItem.java
@@ -18,9 +18,14 @@ public class SaddleItem extends Item {
         if (entity instanceof Saddleable saddleable && entity.isAlive()) {
             if (!saddleable.isSaddled() && saddleable.isSaddleable()) {
                 if (!user.level.isClientSide) {
-                    saddleable.equipSaddle(SoundSource.NEUTRAL, stack.copyWithCount(1)); // Paper - Fix saddles losing nbt data - MC-191591
+                    // Kiterino start
+                    var event = new me.sosedik.kiterino.event.player.PlayerSaddleEntityEvent((org.bukkit.entity.Player) user.getBukkitEntity(), (org.bukkit.entity.Steerable) entity.getBukkitEntity(), stack.asBukkitMirror());
+                    if (!event.callEvent()) return InteractionResult.PASS;
+                    saddleable.equipSaddle(event.isPlaySound() ? SoundSource.NEUTRAL : null, stack.copyWithCount(1)); // Paper - Fix saddles losing nbt data - MC-191591
                     entity.level.gameEvent(entity, GameEvent.EQUIP, entity.position());
+                    if (event.isConsumeItem())
                     stack.shrink(1);
+                    // Kiterino end
                 }
 
                 return InteractionResult.sidedSuccess(user.level.isClientSide);
