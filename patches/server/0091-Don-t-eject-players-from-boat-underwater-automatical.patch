From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: SoSeDiK <mrsosedik@gmail.com>
Date: Tue, 10 Jan 2023 06:05:12 +0200
Subject: [PATCH] Don't eject players from boat underwater automatically


diff --git a/src/main/java/net/minecraft/world/entity/vehicle/Boat.java b/src/main/java/net/minecraft/world/entity/vehicle/Boat.java
index db0e5ba73938c4db98723c964123b17b5dd5d113..7b2d9a90b07ec3fbeb8dcb735cd1eca49f4a0263 100644
--- a/src/main/java/net/minecraft/world/entity/vehicle/Boat.java
+++ b/src/main/java/net/minecraft/world/entity/vehicle/Boat.java
@@ -338,7 +338,15 @@ public class Boat extends VehicleEntity implements VariantHolder<Boat.Type> {
         }
 
         if (!this.level().isClientSide && this.outOfControlTicks >= 60.0F) {
-            this.ejectPassengers();
+            // Kiterino start - Don't eject players
+            //this.ejectPassengers();
+            for (int i = this.passengers.size() - 1; i >= 0; --i) {
+                Entity passenger = this.passengers.get(i);
+                if (!(passenger instanceof Player)) {
+                    passenger.stopRiding();
+                }
+            }
+            // Kiterino end
         }
 
         if (this.getHurtTime() > 0) {
