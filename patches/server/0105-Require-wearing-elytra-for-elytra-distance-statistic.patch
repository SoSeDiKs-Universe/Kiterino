From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: SoSeDiK <mrsosedik@gmail.com>
Date: Wed, 3 May 2023 21:27:39 +0300
Subject: [PATCH] Require wearing elytra for elytra distance statistics


diff --git a/src/main/java/net/minecraft/server/level/ServerPlayer.java b/src/main/java/net/minecraft/server/level/ServerPlayer.java
index dc8a894c39a56087b1d06f490e662db15122dd1b..57fb8db33660c66b04f87789e3cca0ea89d67447 100644
--- a/src/main/java/net/minecraft/server/level/ServerPlayer.java
+++ b/src/main/java/net/minecraft/server/level/ServerPlayer.java
@@ -1822,8 +1822,13 @@ public class ServerPlayer extends Player {
                     }
                 }
             } else if (this.isFallFlying()) {
-                i = Math.round((float) Math.sqrt(deltaX * deltaX + deltaY * deltaY + deltaZ * deltaZ) * 100.0F);
-                this.awardStat(Stats.AVIATE_ONE_CM, i);
+                // Kiterino start
+                ItemStack chestItem = getItemBySlot(net.minecraft.world.entity.EquipmentSlot.CHEST);
+                if (chestItem.is(Items.ELYTRA) && net.minecraft.world.item.ElytraItem.isFlyEnabled(chestItem)) {
+                    i = Math.round((float) Math.sqrt(deltaX * deltaX + deltaY * deltaY + deltaZ * deltaZ) * 100.0F);
+                    this.awardStat(Stats.AVIATE_ONE_CM, i);
+                }
+                // Kiterino end
             } else {
                 i = Math.round((float) Math.sqrt(deltaX * deltaX + deltaZ * deltaZ) * 100.0F);
                 if (i > 25) {
