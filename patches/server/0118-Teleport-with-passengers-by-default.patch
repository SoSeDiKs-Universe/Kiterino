From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: SoSeDiK <mrsosedik@gmail.com>
Date: Thu, 2 Nov 2023 15:44:55 +0200
Subject: [PATCH] Teleport with passengers by default


diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
index e29a56aac670f760e11608accaa5259a22ac7a60..3db64b5cd9b403f3e9618d5f4acf4c43d6161433 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
@@ -323,7 +323,7 @@ public abstract class CraftEntity implements org.bukkit.entity.Entity {
     @Override
     public boolean teleport(Location location, TeleportCause cause) {
         // Paper start - Teleport passenger API
-        return teleport(location, cause, new io.papermc.paper.entity.TeleportFlag[0]);
+        return teleport(location, cause, io.papermc.paper.entity.TeleportFlag.EntityState.RETAIN_PASSENGERS); // Kiterino - retain passengers by default
     }
 
     @Override
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
index ec6ee08d8d7c2899db63f9568b087aaa66a25fdf..4cd1ce4e18b8db753bfd33c44722f753a2e27e9f 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
@@ -1275,7 +1275,7 @@ public class CraftPlayer extends CraftHumanEntity implements Player {
     @Override
     public boolean teleport(Location location, PlayerTeleportEvent.TeleportCause cause) {
         // Paper start - Teleport API
-        return this.teleport(location, cause, new io.papermc.paper.entity.TeleportFlag[0]);
+        return this.teleport(location, cause, io.papermc.paper.entity.TeleportFlag.EntityState.RETAIN_PASSENGERS); // Kiterino - retain passengers by default
     }
 
     @Override
