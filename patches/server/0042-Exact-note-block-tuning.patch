From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: SoSeDiK <mrsosedik@gmail.com>
Date: Mon, 13 Dec 2021 15:17:04 +0100
Subject: [PATCH] Exact note block tuning


diff --git a/src/main/java/net/minecraft/world/level/block/NoteBlock.java b/src/main/java/net/minecraft/world/level/block/NoteBlock.java
index c35b0dcb21b75ac1825b1384f56c328e284a119e..b0dec8764455959ff23f7be84eee6343192ddf01 100644
--- a/src/main/java/net/minecraft/world/level/block/NoteBlock.java
+++ b/src/main/java/net/minecraft/world/level/block/NoteBlock.java
@@ -124,8 +124,17 @@ public class NoteBlock extends Block {
         } else if (world.isClientSide) {
             return InteractionResult.SUCCESS;
         } else {
+            // Kiterino start
+            var itemInHand = player.getItemInHand(hand);
+            if (itemInHand.getItem() == net.minecraft.world.item.Items.STICK) {
+                int currentNote = state.getValue(NOTE);
+                int newNote = Math.min(24, itemInHand.getCount() - 1);
+                if (currentNote != newNote)
+                    state = state.setValue(NOTE, newNote);
+            } else {
             if (player.isShiftKeyDown()) state = state.cycleBackwards(NOTE); else // Kiterino
             state = (BlockState) state.cycle(NoteBlock.NOTE);
+            } // Kiterino end
             world.setBlock(pos, state, 3);
             this.playNote(player, state, world, pos);
             player.awardStat(Stats.TUNE_NOTEBLOCK);
